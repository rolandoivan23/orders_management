{% load static %}

<!doctype html>
<html class="no-js" lang="es-MX">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

        {% block scripts_css %} {% endblock scripts_css %}
        <style>
            body {
                background-color: #eee;
                padding-top: 50px;
            }
            .content{
                background-color: white;
                box-shadow: 2px 2px 6px rgba(0,0,0,0.4);
                padding: 10px;
                margin-top:5px;
            }

            {% block personal_styles %}{% endblock personal_styles %}
        </style>


    <!-- DevExtreme theme -->
    <link rel="stylesheet" href="https://cdn3.devexpress.com/jslib/21.1.4/css/dx.light.css">
 
    
        <!--
        <script src="https://use.fontawesome.com/76790a708b.js"></script>
        -->
    </head>
    <body>
        <!--[if lt IE 8]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->
        <style>
             #main-navbar{
                background: #555;
                height: 42px;
              }

              #main-navbar a {
                color: aliceblue;
                background: rgba(123, 123, 128, 0.15);
              }

              #main-navbar ul{
                margin-top: 0; 
              }

              #main-navbar ul li{
                color: aliceblue;
                list-style-type: none;
                display: inline-block;
                width: 180px;
                padding: 3px;
                margin: 7px 10px;
                text-align: center;
                max-height: 28px;
                background: rgba(123, 123, 128, 0.15);
              }
              #main-navbar ul li:hover{
                cursor: pointer;
                background: rgba(123, 123, 128, 1);
              }
        </style>
         <nav id="main-navbar" style="margin-top: -46px;">
              <ul>
                <li>  <a href="{% url 'make_order' %}">Hacer Pedido</a>  </li>
                <li>  <a href="{% url 'orders_report' %}">Reporte de Ordenes</a>   </li>
              </ul>
            </nav>
        <div class="content">
            {% block contenido %}{% endblock contenido %}
        </div>
    


        
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>

        <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.6.0/jszip.min.js"></script>
        <!-- DevExtreme library -->
        <script type="text/javascript" src="https://cdn3.devexpress.com/jslib/21.1.4/js/dx.all.js"></script>
  
        <script>
            $(function () {
                $.get('/api/v1/orders').then(function(resp){
                    let data = resp;
                    console.log(data);
                   
                    $("#buttonContainer").dxDataGrid({columns: [{dataField: 'order_number', alignment:'center'}, {dataField: 'order_type',  caption: 'Type', alignment: 'center'}, 'customer', {dataField: 'created_date', alignment: 'center'}, {dataField: 'deliver_date', alignment: 'center'}, {dataField:'urgent', allowSort: true, sortOrder: 'desc'}, {dataField: 'num_articles', caption: 'Num. artículos', alignment: 'center', width: '100px'}], noDataText: 'Sin ordenes', dataSource: data, showBorders: true, columnAutoWidth: true, filterRow: {visible: true}, grouping:{ texts:{ groupContinuesMessage: "Continúa en la página siguiente" }}, groupPanel: {visible: true, emptyPanelText: "Arrastre aquí la columna para agrupar"},
                        export: {enabled: true, fileName: 'sss', allowExportSelectedData: true, 
                            excelFilterEnabled: true, excelWrapTextEnabled: true, texts: {exportAll: 'Exportar Todo', exportSelectedRows: 'Exportar Selección'}}
                });

                  

                }, function(error){

                })
            });
        </script>

        {% block scripts_js %} {% endblock scripts_js %}
    </body>
</html>